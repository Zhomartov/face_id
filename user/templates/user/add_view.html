{% extends 'user/base.html' %}
{% block content %}
<div class='section'> 
  <div class='title'> 
    <span class="material-symbols-outlined">ar_on_you</span> 
    <h1>Добавить объект </h1> 
  </div> 
  <div class='form-body'>
<select id="form-select" class="form-select">
  <option value="">Выберите тип</option>
  <option value="user">Пользователь</option>
  <option value="student">Студент</option>
  <option value="teacher">Преподаватель</option>
  <option value="group">Группа</option>
</select>

<!-- Форма пользователя -->
<form id="user-form" method="post" enctype="multipart/form-data" class="form">
  {% csrf_token %}
  <input type="hidden" name="form_type" value="user">
  {{ user_form.as_p }}
  <button type="submit" class="btn">Сохранить пользователя</button>
</form>

<!-- Остальные формы как раньше -->
<form id="student-form" method="post" enctype="multipart/form-data" class="form">
  {% csrf_token %}
  <input type="hidden" name="form_type" value="student">
  {{ student_form.as_p }}
  <button type="submit" class="btn">Сохранить студента</button>
</form>

<form id="teacher-form" method="post" enctype="multipart/form-data" class="form">
  {% csrf_token %}
  <input type="hidden" name="form_type" value="teacher">
  {{ teacher_form.as_p }}
  <button type="submit" class="btn">Сохранить преподавателя</button>
</form>

<form id="group-form" method="post" class="form">
  {% csrf_token %}
  <input type="hidden" name="form_type" value="group">
  {{ group_form.as_p }}
  <button type="submit" class="btn">Сохранить группу</button>
</form>
</div>
</div>
{% endblock %}

{% block script %}
<script>
const select = document.getElementById("form-select");
const forms = {
  user: document.getElementById("user-form"),
  student: document.getElementById("student-form"),
  teacher: document.getElementById("teacher-form"),
  group: document.getElementById("group-form")
};

select.addEventListener("change", () => {
  Object.values(forms).forEach(f => f.classList.remove("show"));
  const selected = forms[select.value];
  if (selected) selected.classList.add("show");
});
</script>
{% endblock %}

